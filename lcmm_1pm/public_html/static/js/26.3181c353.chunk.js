"use strict";(self.webpackChunklcmm=self.webpackChunklcmm||[]).push([[26],{26:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(555),s=r(43),o=r(339),c=r(862),i=r(579);const n=e=>{var t,r,a,c,n;let{result:l,type:d,rootFolders:h,onAdd:m}=e;const[x,w]=(0,s.useState)(""),[g,u]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!1),v=(null===(t=l.images)||void 0===t||null===(r=t.find((e=>"poster"===e.coverType)))||void 0===r?void 0:r.remoteUrl)||(null===(a=l.images)||void 0===a||null===(c=a.find((e=>"poster"===e.coverType)))||void 0===c?void 0:c.url)||"https://via.placeholder.com/680x1000?text=No+Image";return(0,i.jsx)("div",{className:"bg-dark-200 rounded-lg overflow-hidden border border-dark-300",children:(0,i.jsxs)("div",{className:"p-4 sm:p-6 flex flex-col sm:flex-row gap-6",children:[(0,i.jsx)("div",{className:"w-full sm:w-36 md:w-48 flex-shrink-0",children:(0,i.jsx)("img",{src:v,alt:l.title,className:"w-full h-auto rounded-md object-cover aspect-[2/3]"})}),(0,i.jsxs)("div",{className:"flex-grow",children:[(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{className:"text-xl font-bold text-white",children:[l.title,l.year&&(0,i.jsx)("span",{className:"ml-2 text-gray-400 font-normal",children:l.year})]}),(null===(n=l.ratings)||void 0===n?void 0:n.value)&&(0,i.jsxs)("div",{className:"flex items-center mt-1",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-yellow-500 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,i.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),(0,i.jsx)("span",{className:"text-sm text-yellow-500",children:l.ratings.value})]})]}),l.inLibrary&&(0,i.jsxs)("div",{className:"badge-in-library inline-flex items-center",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"In Library"]})]}),(0,i.jsx)("p",{className:"text-gray-300 text-sm mb-4 ".concat(p?"":"line-clamp-3"),children:l.overview||"No overview available"}),l.overview&&l.overview.length>150&&(0,i.jsx)("button",{className:"text-xs text-primary-400 hover:text-primary-300 mb-4",onClick:()=>y(!p),children:p?"Show less":"Show more"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-x-4 gap-y-2 text-sm mb-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Status:"})," ",(0,i.jsx)("span",{className:"text-gray-300",children:l.status||"N/A"})]}),"show"===d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Network:"})," ",(0,i.jsx)("span",{className:"text-gray-300",children:l.network||"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Seasons:"})," ",(0,i.jsx)("span",{className:"text-gray-300",children:l.seasonCount||"N/A"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Runtime:"})," ",(0,i.jsx)("span",{className:"text-gray-300",children:l.runtime?"".concat(l.runtime," mins"):"N/A"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"text-gray-500",children:"Release:"})," ",(0,i.jsx)("span",{className:"text-gray-300",children:l.digitalRelease||l.inCinemas||l.physicalRelease?new Date(l.digitalRelease||l.inCinemas||l.physicalRelease).toLocaleDateString():"N/A"})]})]})]}),!l.inLibrary&&(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center",children:[(0,i.jsx)("div",{className:"w-full sm:w-64",children:(0,i.jsxs)("select",{value:x,onChange:e=>w(e.target.value),className:"input w-full",disabled:g,children:[(0,i.jsx)("option",{value:"",children:"Select storage location..."}),h.map((e=>(0,i.jsx)("option",{value:e.path,children:e.path},e.id)))]})}),(0,i.jsx)("button",{onClick:async()=>{if(x){u(!0);try{await m(l,x),o.oR.success("Added ".concat(l.title," to your library"))}catch(e){console.error("Failed to add media:",e),o.oR.error("Failed to add ".concat(l.title))}finally{u(!1)}}else o.oR.error("Please select a root folder")},disabled:!x||g,className:"btn-primary",children:g?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add to Library"})]})]})]})})},l=()=>{const[e,t]=(0,s.useState)("shows"),[r,l]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),[w,g]=(0,s.useState)([]),[u,p]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{if("shows"===e){const e=await c.Kf.getRootFolders();g(e)}else{const e=await c.Fc.getRootFolders();g(e)}}catch(t){console.error("Error fetching root folders:",t),p("Failed to load storage locations. Some features may be limited.")}})()}),[e]);const y=async(t,r)=>{try{let s;if("shows"===e){const e=(0,a.A)((0,a.A)({},t),{},{rootFolderPath:r,monitored:!0,qualityProfileId:1,languageProfileId:1,seasonFolder:!0,addOptions:{searchForMissingEpisodes:!0}});s=await c.Kf.addSeries(e)}else{const e=(0,a.A)((0,a.A)({},t),{},{rootFolderPath:r,monitored:!0,qualityProfileId:1,addOptions:{searchForMovie:!0}});s=await c.Fc.addMovie(e)}return x((r=>r.map((r=>"shows"===e&&r.tvdbId===t.tvdbId||"movies"===e&&r.tmdbId===t.tmdbId?(0,a.A)((0,a.A)({},r),{},{inLibrary:!0}):r)))),o.oR.success("".concat(t.title," added to your library")),s}catch(s){throw console.error("Error adding media:",s),o.oR.error("Failed to add ".concat(t.title)),s}};return(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Search & Add Media"}),(0,i.jsxs)("div",{className:"bg-dark-200 rounded-lg p-1",children:[(0,i.jsx)("button",{onClick:()=>t("shows"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ".concat("shows"===e?"bg-primary-500 text-white":"text-gray-300 hover:text-white"),children:"TV Shows"}),(0,i.jsx)("button",{onClick:()=>t("movies"),className:"px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 ".concat("movies"===e?"bg-primary-500 text-white":"text-gray-300 hover:text-white"),children:"Movies"})]})]}),u&&(0,i.jsx)("div",{className:"rounded-lg bg-red-900/30 border border-red-700 p-4 text-red-100 mb-6",children:u}),(0,i.jsx)("div",{className:"bg-dark-100 rounded-lg border border-dark-300 p-6 mb-8",children:(0,i.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),r.trim()){h(!0),x([]),p(null);try{if("shows"===e){const e=await c.Kf.searchSeries(r);x(e)}else{const e=await c.Fc.searchMovies(r);x(e)}}catch(a){console.error("Search error:",a),p("Search failed. Please try again later."),o.oR.error("Search failed")}finally{h(!1)}}},className:"flex flex-col sm:flex-row gap-4",children:[(0,i.jsx)("div",{className:"flex-grow",children:(0,i.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Search for ".concat("shows"===e?"TV shows":"movies","..."),className:"input w-full"})}),(0,i.jsx)("button",{type:"submit",disabled:d||!r.trim(),className:"btn-primary whitespace-nowrap",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline-block",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Searching..."]}):"Search"})]})}),(0,i.jsx)("div",{className:"space-y-6",children:d?(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsxs)("svg",{className:"animate-spin h-12 w-12 text-primary-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,i.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,i.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,i.jsxs)("p",{className:"mt-4 text-lg text-gray-400",children:["Searching ","shows"===e?"TV shows":"movies","..."]})]}):m.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Search Results"}),(0,i.jsx)("div",{className:"space-y-4",children:m.map((t=>(0,i.jsx)(n,{result:t,type:"shows"===e?"show":"movie",rootFolders:w,onAdd:y},"shows"===e?t.tvdbId:t.tmdbId)))})]}):r&&!d?(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 mx-auto text-gray-500",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 16.318A4.486 4.486 0 0012.016 15a4.486 4.486 0 00-3.198 1.318M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})}),(0,i.jsx)("p",{className:"mt-4 text-lg text-gray-400",children:"No results found"}),(0,i.jsx)("p",{className:"text-gray-500",children:"Try a different search term"})]}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-12 h-12 mx-auto text-gray-500",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),(0,i.jsxs)("p",{className:"mt-4 text-lg text-gray-400",children:["Search for ","shows"===e?"TV shows":"movies"]}),(0,i.jsxs)("p",{className:"text-gray-500",children:["Type a title to search the ","shows"===e?"Sonarr":"Radarr"," database"]})]})})]})}},862:(e,t,r)=>{r.d(t,{Fc:()=>i,Kf:()=>c,i$:()=>n,md:()=>l});var a=r(722);const s="https://lcmm.legendre.cloud",o=localStorage.getItem("lcmm_token");o&&(a.A.defaults.headers.common.Authorization="Bearer ".concat(o));const c={getSeries:async()=>{try{return(await a.A.get("".concat(s,"/api/sonarr?action=series"))).data}catch(e){throw console.error("Error fetching series:",e),e}},getRootFolders:async()=>{try{return(await a.A.get("".concat(s,"/api/sonarr?action=rootfolders"))).data}catch(e){throw console.error("Error fetching root folders:",e),e}},searchSeries:async e=>{try{return(await a.A.get("".concat(s,"/api/sonarr?action=search&term=").concat(encodeURIComponent(e)))).data}catch(t){throw console.error("Error searching series:",t),t}},addSeries:async e=>{try{return(await a.A.post("".concat(s,"/api/sonarr?action=add"),e)).data}catch(t){throw console.error("Error adding series:",t),t}}},i={getMovies:async()=>{try{return(await a.A.get("".concat(s,"/api/radarr?action=movies"))).data}catch(e){throw console.error("Error fetching movies:",e),e}},getRootFolders:async()=>{try{return(await a.A.get("".concat(s,"/api/radarr?action=rootfolders"))).data}catch(e){throw console.error("Error fetching root folders:",e),e}},searchMovies:async e=>{try{return(await a.A.get("".concat(s,"/api/radarr?action=search&term=").concat(encodeURIComponent(e)))).data}catch(t){throw console.error("Error searching movies:",t),t}},addMovie:async e=>{try{return(await a.A.post("".concat(s,"/api/radarr?action=add"),e)).data}catch(t){throw console.error("Error adding movie:",t),t}}},n={getUsers:async()=>{try{return(await a.A.get("".concat(s,"/api/users?action=list"))).data}catch(e){throw console.error("Error fetching users:",e),e}},getUser:async e=>{try{return(await a.A.get("".concat(s,"/api/users?action=get&id=").concat(e))).data}catch(t){throw console.error("Error fetching user:",t),t}},updateUser:async(e,t)=>{try{return(await a.A.put("".concat(s,"/api/users?action=update"),{id:e,role:t})).data}catch(r){throw console.error("Error updating user:",r),r}},deleteUser:async e=>{try{return(await a.A.delete("".concat(s,"/api/users?action=delete&id=").concat(e))).data}catch(t){throw console.error("Error deleting user:",t),t}},getUserActivity:async e=>{try{return(await a.A.get("".concat(s,"/api/users?action=activity&id=").concat(e))).data}catch(t){throw console.error("Error fetching user activity:",t),t}}},l={getInvitations:async()=>{try{return(await a.A.get("".concat(s,"/api/invitations?action=list"))).data}catch(e){throw console.error("Error fetching invitations:",e),e}},createInvitation:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{return(await a.A.post("".concat(s,"/api/invitations?action=create"),{email:e})).data}catch(t){throw console.error("Error creating invitation:",t),t}},deleteInvitation:async e=>{try{return(await a.A.delete("".concat(s,"/api/invitations?action=delete&id=").concat(e))).data}catch(t){throw console.error("Error deleting invitation:",t),t}},getAdditions:async()=>{try{return(await a.A.get("".concat(s,"/api/additions"))).data}catch(e){throw console.error("Error fetching additions:",e),e}}}}}]);
//# sourceMappingURL=26.3181c353.chunk.js.map